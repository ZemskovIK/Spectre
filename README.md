# Spectre

## Описание проекта

Проект выполнен в рамках участия команды разработчиков в хакатоне от РТУ МИРЭА "Код Победы".
Название проекта `Spectre` взято в честь одной из шифровальных машин стороны красной армии времен Великой Отечественной Войны.

### Цель проекта

Продемонстрировать безопасную клиент-серверную систему с современным
шифрованием: шифрование сообщений по схеме AES-256 (CBC + HMAC), цифровую
подпись ECDSA, обмен ключами (Diffie-Hellman) и мониторинг целостности.
Включает тестирование на основные атаки и оценку производительности.

Описать и реализовать схему клиент-серверного взаимодействия с использованием современных методов шифрования сообщений, обмена ключами и подписи сообщений для подтверждения целостности данных.

### Основные решения

1. Стандартная клиент-серверная модель.
2. Клиент и сервер сначала обмениваются публичными ключами (через протокол Диффи-Хеллмана (ECDH) для установления общей сессионной строки), затем генерируется симметричный ключ AES-256 для шифрования сеанса. После установления секретов коммуникация идёт по HTTPS-подобному протоколу: каждый запрос шифруется на клиенте и проверяется на сервере.
3. Необходимо разработать и включить схему потоков данных между клиентом и
сервером (от подключения до проверки расшифрованных данных).
4. В качестве протокола передачи данных выбран HTTP. 
5. Аутентификация на основе RSA (с использованием JWT-токенов).

### Описание предметной области проекта

Проект призван обеспечить безопасную передачу данных между архивом засекреченных писем, имеющих историческую ценность и теми, кто заинтересован в работе с этими письмами в исследовательских и научных целях.

Архив писем контролируется организацией владельцем. Архив имеет систему уровней доступа для регулирования контента, с которым работают заинтересованные лица или организации (далее "клиент").
Если клиент заинтересован в получении доступа к материалам имеющим конкретный уровень доступа для своей исследовательской деятельности, он направляет письмо в архив или связываются с ответственными лицами иным путем с запросом на получения доступа к материалам, нужным для работы. В обращении обязаны быть описаны основания для получения соответствующего доступа и вся документация подтверждающая истинность этих оснований.
После рассмотрения запроса, ответственные лица отвечают на него. В случае положительного решения, клиенту направляются данные для входа в систему работы с письмами. Вид данных и их содержание, вновь, определяется ответственными лицами. После получения данных, клиент может войти в систему и начать свою работу. В зависимости от уровня доступа он сможет работать только с тем контентом, который соответствует его уровню.
Ответсветнные же лица имеют максимальный уровень доступа в системе, они в праве, по собственному усмотрению, вносить записи в систему, изменять их и удалять, назначать им уровни доступа и тд. Так же ответственные лица отвечают за часть работы с клиентами. При нарушении правил работы с платформой, клиенту может быть закрыт доступ к системе без возможности восстановления.

---

## Техническая реализация

### Стек технологий

#### Сервер

Для реализации серверной части выбраны:
языки Go версии 1.24.2 и Python. 
Сервис для работы с письмами, написанный на Go использует: стандартные библиотеку для работы с сетью: `net/http`, внешние модуль для jwt `github.com/golang-jwt/jwt/v5`, модуль для работы с миграциями базы данных `github.com/golang-migrate/migrate/v4`, модуль для работы с самой базой `github.com/mattn/go-sqlite3`, модуль для логирования `github.com/sirupsen/logrus` и модуль для работы с базовой криптографией `golang.org/x/crypto`.
Сервис работающий с шифрованием, ключами и всем, что связано с криптографией, написанный на Python использует:
микрофреймворк для реализации своего api `flask`, модуль `cryptography` для работы с криптографией и модуль `gunicorn` для запуска сервиса в асинхронном режиме.

#### Клиент

Клиентское взаимодействие может осуществляться с помощью desktop клиента, написанного на Python с использованием стандартного модуля `tkinter`, или с помощью web интерфейса реализованного с библиотекой react-js.

#### Инфраструктура
Для развертывания сервисов используется технология контейнеризации, реализованная в виде docker образов.

---

## Архитектура проекта

Репозиторий разделяется на основные части:
- Клиенская
- Серверная

В каждом модуле проекта присутствует собственный файл `README.md` для внутреннего документирования.

Упрощенная схема:
```
├── README.md  # вы тут
├── client  
│   ├── desktop
│   │   ├── dist
│   │   │   └── main.exe  # готовый исполняемый файл для Windows 
│   │   ├── main.py
│   │   └── README.md  
│   └── web
│       ├── index.html  # базовая страница
│       ├── README.md
│       └─── src
│            ├── App.css
│            ├── App.jsx 
│            ├── components  # основа приложения - react компоненты
│            ├── index.css
│            └── main.jsx
└── services  # серверная часть
    ├── docker-compose.yaml  # файл для развертывания контейнеров
    ├── crypto
    │   ├── crypto.py  # работа с клиптографией
    │   ├── Dockerfile  # описание докер образа
    │   ├── README.md
    │   ├── requirements.txt  # описание зависимостей сервиса
    │   ├── server.py  # описание api сервиса
    │   └── Tasks.md  # задачи реализуемые сервисом
    └── spectre
        ├── db
        │   ├── migrations  # миграции базы
        │   └── spec.db  # физическая sqlite база с данным (для тестирования)
        ├── Dockerfile
        ├── README.md
        └── src  
            ├── cmd  # точки входа в приложения сервиса
            │   ├── migrator  # приложение для работы с миграциями базы
            │   └── spectre  # основное приложение
            ├── go.mod  # описание всех зависимостей сервиса
            ├── internal  # внутренняя логика
            │   ├── models  # основные предметные сущности сервиса
            │   ├── srv  # сервер
            │   │   ├── api  # api энд-поинты
            │   │   ├── auth  # работа с аутентификацией
            │   │   ├── proxy  # подключение к сервису crypto
            │   └── storage  # работа с базой
            └── pkg  # вспомогательный пакет (работа с логированием)

```



## Авторы

- [@ZemskovIK](https://www.github.com/ZemskovIK)
- [@kudras3r](https://www.github.com/kudras3r)
- [@Asura-code](https://www.github.com/Asura-code)
- [@justbelka](https://www.github.com/justbelka)
- [@danzyxd](https://www.github.com/danzyxd)

